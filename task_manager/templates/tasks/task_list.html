<!-- templates/tasks/task_list.html -->

{% extends 'base.html' %}

{% block title %}Список задач - Менеджер задач Hexlet{% endblock %}

{% block content %}
<h1 class="my-4">Все задачи</h1>

<!-- Форма фильтрации -->
<form method="get" class="mb-4 p-3 border rounded">
    {% for field in filter.form %}
    <div class="mb-3">
        <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}</label>
        {{ field }}
    </div>
    {% endfor %}
    <button type="submit" class="btn btn-primary">Фильтровать</button>
    <a href="{% url 'task-list' %}" class="btn btn-secondary">Сбросить фильтры</a>
</form>

<a href="{% url 'task-create' %}" class="btn btn-primary mb-3">Создать новую задачу</a>

<div class="table-responsive">
    <table class="table table-striped">
        <thead class="thead-dark">
            <tr>
                <th>ID</th>
                <th>Название</th>
                <th>Статус</th>
                <th>Автор</th>
                <th>Исполнитель</th>
                <th>Дата создания</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
            {% for task in tasks %}
            <tr>
                <td>{{ task.id }}</td>
                <td><a href="{% url 'task-detail' task.pk %}">{{ task.name }}</a></td>
                <td>{{ task.status.name }}</td>
                <td>{{ task.author.username }}</td>
                <td>{{ task.user.username|default:"Не назначен" }}</td>
                <td>{{ task.created_at|date:"d.m.Y H:i" }}</td>
                <td>
                    <a href="{% url 'task-update' task.pk %}" class="btn btn-primary btn-sm">Редактировать</a>
                    <a href="{% url 'task-delete' task.pk %}" class="btn btn-danger btn-sm">Удалить</a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="7" class="text-center">Задач нет.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
